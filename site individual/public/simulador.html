<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>calculadora</title>
   <link rel="stylesheet" href="./css/simulador.css">

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;800&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

  </head>
  <body>
   <div class="menu">
  <p>THE BIRKIN</p>
  <img src="./fotos/miniLogo.png" alt="logo" />

  <a href="./login.html">Login</a>
  <a href="./cadastro.html">Cadastro</a>
  <a href="./dashboard.html">Dashboard</a>
  <a href="index.html">Início</a>
</div>

<div class="direita">

  <span>ME FALE SOBRE SUA BOLSA</span>

  <label>QUANTO VOCÊ PAGOU NA SUA BOLSA?</label>

  <input
    type="range"
    id="ipt_preco"
    min="20000"
    max="300000"
    value="20000"
    step="1000"
    oninput="valor.innerText = this.value"
  />

  <div style="margin-top: 10px; font-size: 26px;">
    R$ <span id="valor">20000</span>
  </div>

 
  <div class="select-row">

    <div class="select-box">
      <h4>TAMANHO</h4>
      <select id="ipt_tamanho">
        <option value="1">20 cm</option>
        <option value="2">25 cm</option>
        <option value="3">30 cm</option>
        <option value="4">35 cm</option>
      </select>
    </div>

    <div class="select-box">
      <h4>COURO</h4>
      <select id="ipt_couro">
        <option value="1">Bezerro</option>
        <option value="2">Crocodilo</option>
        <option value="3">Avestruz</option>
        <option value="4">Lagarto</option>
      </select>
    </div>

    <div class="select-box">
      <h4>HARDWARE</h4>
      <select id="ipt_Hardware">
        <option value="1">Paladium</option>
        <option value="2">Gold</option>
        <option value="3">Rose Gold</option>
        <option value="4">Electrum</option>
        <option value="5">Diamond</option>
      </select>
    </div>

    <div class="select-box">
      <h4>TEM CAIXA?</h4>
      <select id="ipt_caixa">
        <option value="1">Sim</option>
        <option value="2">Não</option>
      </select>
    </div>

  </div>

  <button onclick="calcular()">Calcular</button>


  <div id="mensagem"></div>

</div>

    
<script>
function calcular() {
    var preco = Number(ipt_preco.value);
    var couro = Number(ipt_couro.value);
    var tamanho = Number(ipt_tamanho.value);
    var hardware = Number(ipt_Hardware.value);
    var caixa = Number(ipt_caixa.value);
    var idUsuario = sessionStorage.ID_USUARIO;
    
    var multCouro = [1.10, 1.30, 1.35, 1.60];
    var multTamanho = [1.20, 1.05, 1.05, 1.00];
    var multHardware = [1.08, 1.12, 1.10, 1.30, 1.40];
    var multCaixa = [1.03, 1.00];

  
    var valorFinal = preco
        * multCouro[couro - 1]
        * multTamanho[tamanho - 1]
        * multHardware[hardware - 1]
        * multCaixa[caixa - 1]; 

    
    var valorFormatado = valorFinal.toLocaleString("pt-BR", {
        style: "currency",
        currency: "BRL"
    });

    mensagem.innerHTML = ` Valor estimado da sua Birkin: ${valorFormatado}`


    fetch("/simulador/registrar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                precoServer: preco,
                couroServer: couro,
                tamanhoServer: tamanho,
                hardwareServer: hardware,
                valorFinalServer: valorFinal,
                idUsuarioServer: idUsuario

            })
        }).then(function (resposta) {
            console.log("ESTOU NO THEN DO entrar()!")

            if (resposta.ok) {
                console.log(resposta);
            } else {

                console.log("Houve um erro ao tentar realizar o login!");
            }

        }).catch(function (erro) {
            console.log(erro);
        })
}


   


</script>
